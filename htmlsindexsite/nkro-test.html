<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NKRO Test - AssetsToolsHub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="sidebar.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .tool-container {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
        }

        .challenge-box {
            background: #0d1117;
            border: 1px solid var(--card-border);
            border-radius: 2rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .key-row {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .key-target {
            width: 60px;
            height: 60px;
            border: 2px solid #374151;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            color: #6b7280;
            background: #1f2937;
            transition: 0.2s;
        }

        .key-target.active {
            border-color: #10b981;
            background: #10b981;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
        }

        .level-badge {
            background: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 700;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .nav-btns {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>

<body>
    <div class="main-content">
        <div class="tool-container">
            <h1 style="font-size: 2.5rem; font-weight:900; margin-bottom: 1rem;">NKRO Challenge <span
                    style="color:#fbbf24; font-size:1rem; vertical-align:middle; margin-left:10px">PRO</span></h1>
            <p style="color:var(--text-muted); margin-bottom: 3rem;">Can your keyboard handle these simultaneous key
                combinations?</p>

            <div class="challenge-box">
                <div class="level-badge" id="lvlName">Level 1: The Basics</div>
                <h2 style="font-size:2rem; margin-bottom:0.5rem">Press ALL Keys Below</h2>

                <div class="key-row" id="keys">
                    <!-- Keys injected here -->
                </div>

                <div id="status" style="height:30px; font-weight:700; color:var(--text-muted); margin-bottom:2rem">
                    Waiting...</div>

                <div class="nav-btns">
                    <button class="nav-btn" onclick="prevLevel()">Previous</button>
                    <button class="nav-btn" onclick="nextLevel()">Next Level</button>
                </div>
            </div>

            <div
                style="background:rgba(255,255,255,0.03); padding:1rem; border-radius:1rem; margin-top:2rem; text-align:left">
                <strong>Why this test?</strong><br>
                Many non-gaming keyboards cannot register "W + A + S" or "Space + Shift + W" simultaneously due to
                matrix limitations. This tool tests typically problematic combinations.
            </div>
        </div>
    </div>

    <script src="layout.js"></script>
    <script>
        const levels = [
            { name: "FPS Movement", keys: ['KeyW', 'KeyA', 'KeyS', 'KeyD'] },
            { name: "FPS Sprint", keys: ['ShiftLeft', 'KeyW', 'Space'] },
            { name: "Matrix Cluster 1", keys: ['KeyQ', 'KeyW', 'KeyE', 'KeyR', 'KeyT', 'KeyY'] },
            { name: "Matrix Cluster 2", keys: ['KeyA', 'KeyS', 'KeyD', 'KeyF', 'KeyG', 'KeyH'] },
            { name: "The Double Shift", keys: ['ShiftLeft', 'ShiftRight', 'KeyA', 'KeyZ'] },
            { name: "Function Crazy", keys: ['ControlLeft', 'AltLeft', 'Delete'] }, // Wait, careful with system keys
            { name: "Number Row", keys: ['Digit1', 'Digit2', 'Digit3', 'Digit4', 'Digit5'] }
        ];

        let currentLevel = 0;
        let pressed = new Set();

        function render() {
            const data = levels[currentLevel];
            document.getElementById('lvlName').innerText = `Level ${currentLevel + 1}: ${data.name}`;

            const container = document.getElementById('keys');
            container.innerHTML = '';

            data.keys.forEach(code => {
                const div = document.createElement('div');
                div.className = 'key-target';
                div.dataset.code = code;

                let label = code.replace('Key', '').replace('Digit', '').replace('Left', '').replace('Right', '');
                if (code === 'Space') label = 'â£';
                div.innerText = label;

                container.appendChild(div);
            });

            updateStatus();
        }

        function updateStatus() {
            const data = levels[currentLevel];
            let all = true;

            data.keys.forEach(code => {
                const el = document.querySelector(`.key-target[data-code="${code}"]`);
                if (pressed.has(code)) {
                    el.classList.add('active');
                } else {
                    el.classList.remove('active');
                    all = false;
                }
            });

            const status = document.getElementById('status');
            if (all) {
                status.innerText = "SUCCESS! LEVEL CLEARED";
                status.style.color = "#10b981";
            } else {
                status.innerText = "Hold all keys simultaneously...";
                status.style.color = "#6b7280";
            }
        }

        function nextLevel() {
            if (currentLevel < levels.length - 1) {
                currentLevel++;
                render();
            }
        }

        function prevLevel() {
            if (currentLevel > 0) {
                currentLevel--;
                render();
            }
        }

        window.addEventListener('keydown', (e) => {
            e.preventDefault();
            pressed.add(e.code);
            updateStatus();
        });

        window.addEventListener('keyup', (e) => {
            pressed.delete(e.code);
            updateStatus();
        });

        // Init
        render();
    </script>
</body>

</html>