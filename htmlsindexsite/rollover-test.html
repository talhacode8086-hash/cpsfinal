<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Rollover Test - AssetsToolsHub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="sidebar.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .tool-container {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
        }

        .count-display {
            font-size: 8rem;
            font-weight: 900;
            color: var(--primary);
            margin: 2rem 0;
            line-height: 1;
            text-shadow: 0 0 50px rgba(99, 102, 241, 0.3);
            transition: 0.1s;
        }

        .keys-list {
            background: #0d1117;
            border: 1px solid var(--card-border);
            border-radius: 1.5rem;
            padding: 2rem;
            min-height: 150px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 1rem;
        }

        .key-tag {
            background: #1f2937;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 700;
            border: 1px solid #374151;
            animation: popIn 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from {
                transform: scale(0.5);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .max-stat {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="main-content">
        <div class="tool-container">
            <h1 style="font-size: 2.5rem; font-weight:900; margin-bottom: 1rem;">Key Rollover Test</h1>
            <p style="color:var(--text-muted); margin-bottom: 3rem;">How many keys can your keyboard register at once?
                (NKRO Test)</p>

            <div style="position:relative">
                <div class="count-display" id="count">0</div>
                <div class="max-stat">
                    <div style="font-size:0.8rem; color:var(--text-muted)">MAX DETECTED</div>
                    <div id="max" style="font-size:1.5rem; font-weight:800; color:white">0</div>
                </div>
            </div>

            <div style="margin-bottom:1rem; font-weight:600; color:var(--text-muted)">CURRENTLY PRESSED KEYS</div>
            <div class="keys-list" id="list">
                <span style="color:#4b5563">Press keys to start...</span>
            </div>

            <div
                style="text-align:left; margin-top:3rem; background:rgba(0,0,0,0.2); padding:2rem; border-radius:1.5rem">
                <h3>Rollover Info</h3>
                <ul style="color:var(--text-muted); line-height:1.8; margin-left:1.5rem; margin-top:1rem">
                    <li><b>6KRO:</b> Common in older USB keyboards (max 6 keys).</li>
                    <li><b>NKRO:</b> N-Key Rollover (Unlimited). Standard for gaming keyboards.</li>
                    <li><b>2KRO:</b> Common budget membrane limit (some ghosting issues).</li>
                </ul>
            </div>

            <button class="join-pro-btn" style="width:100%; margin-top:2rem" onclick="resetMax()">RESET MAX
                SCORE</button>
        </div>
    </div>

    <script src="layout.js"></script>
    <script>
        const countEl = document.getElementById('count');
        const listEl = document.getElementById('list');
        const maxEl = document.getElementById('max');

        let pressed = new Set();
        let max = 0;

        function update() {
            countEl.innerText = pressed.size;

            if (pressed.size > max) {
                max = pressed.size;
                maxEl.innerText = max;
                countEl.style.transform = 'scale(1.1)';
                setTimeout(() => countEl.style.transform = 'scale(1)', 100);
            }

            listEl.innerHTML = '';
            if (pressed.size === 0) {
                listEl.innerHTML = '<span style="color:#4b5563">Press keys to start...</span>';
                return;
            }

            Array.from(pressed).sort().forEach(code => {
                const tag = document.createElement('div');
                tag.className = 'key-tag';
                // Beautify code
                let label = code.replace('Key', '').replace('Digit', '');
                tag.innerText = label;
                listEl.appendChild(tag);
            });
        }

        window.addEventListener('keydown', (e) => {
            e.preventDefault();
            if (e.repeat) return;
            pressed.add(e.code);
            update();
        });

        window.addEventListener('keyup', (e) => {
            pressed.delete(e.code);
            update();
        });

        window.addEventListener('blur', () => {
            pressed.clear();
            update();
        });

        function resetMax() {
            max = 0;
            maxEl.innerText = 0;
            pressed.clear();
            update();
        }
    </script>
</body>

</html>