<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trail Visualizer - AssetsToolsHub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="sidebar.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .tool-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .canvas-area {
            width: 100%;
            height: 600px;
            background: #000;
            border-radius: 2rem;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--card-border);
            cursor: none;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        .controls-panel {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 1.5rem;
            padding: 1.5rem;
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
            justify-content: center;
            align-items: center;
        }

        .control-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-item label {
            font-size: 0.7rem;
            font-weight: 800;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        input[type="range"] {
            accent-color: var(--primary);
        }
    </style>
</head>

<body>
    <div class="main-content">
        <div class="tool-container">
            <h1 style="font-size: 2.5rem; font-weight:900; text-align:center">Mouse Trail Visualizer</h1>
            <p style="color:var(--text-muted); text-align:center; margin-bottom:2rem">Test and design procedural cursor
                trails for your streams or apps.</p>

            <div class="canvas-area" id="area">
                <canvas id="trailCanvas"></canvas>
                <div
                    style="position:absolute; top:20px; left:20px; color:var(--text-muted); font-weight:600; pointer-events:none">
                    MOVE WITHIN THE VOID</div>
            </div>

            <div class="controls-panel">
                <div class="control-item">
                    <label>Color</label>
                    <input type="color" id="trailColor" value="#6366f1">
                </div>
                <div class="control-item">
                    <label>Particle Size</label>
                    <input type="range" id="trailSize" min="1" max="20" value="5">
                </div>
                <div class="control-item">
                    <label>Decay Rate</label>
                    <input type="range" id="decay" min="1" max="100" value="90">
                </div>
                <div class="control-item">
                    <label>Spacing</label>
                    <input type="range" id="spacing" min="1" max="50" value="5">
                </div>
            </div>
        </div>
    </div>

    <script src="layout.js"></script>
    <script>
        const canvas = document.getElementById('trailCanvas');
        const ctx = canvas.getContext('2d');
        const colorInp = document.getElementById('trailColor');
        const sizeInp = document.getElementById('trailSize');
        const decayInp = document.getElementById('decay');
        const spacingInp = document.getElementById('spacing');

        let particles = [];
        let lastX = 0, lastY = 0;

        function resize() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.size = parseFloat(sizeInp.value);
                this.color = colorInp.value;
                this.life = 1.0;
            }

            update() {
                this.life *= (parseFloat(decayInp.value) / 100);
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * this.life, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.life;
                ctx.fill();
            }
        }

        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const dist = Math.sqrt(Math.pow(x - lastX, 2) + Math.pow(y - lastY, 2));
            if (dist > parseFloat(spacingInp.value)) {
                particles.push(new Particle(x, y));
                lastX = x; lastY = y;
            }
        });

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.update();
                p.draw();
                if (p.life < 0.01) particles.splice(i, 1);
            }

            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>

</html>